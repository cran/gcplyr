<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Mike Blazanin" />


<title>Processing data</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Processing data</h1>
<h4 class="author">Mike Blazanin</h4>


<div id="TOC">
<ul>
<li><a href="#where-are-we-so-far" id="toc-where-are-we-so-far">Where
are we so far?</a></li>
<li><a href="#how-to-process-and-analyze-your-data" id="toc-how-to-process-and-analyze-your-data">How to process and analyze
your data</a>
<ul>
<li><a href="#a-brief-primer-on-dplyr" id="toc-a-brief-primer-on-dplyr">A brief primer on dplyr</a></li>
</ul></li>
<li><a href="#CalculatingDerivatives" id="toc-CalculatingDerivatives">Processing data: calculating
derivatives</a>
<ul>
<li><a href="#a-simple-derivative" id="toc-a-simple-derivative">A simple
derivative</a></li>
<li><a href="#per-capita-derivative" id="toc-per-capita-derivative">Per-capita derivative</a></li>
<li><a href="#converting-per-capita-growth-rates-into-doubling-times" id="toc-converting-per-capita-growth-rates-into-doubling-times">Converting
per-capita growth rates into doubling times</a></li>
</ul></li>
<li><a href="#whats-next" id="toc-whats-next">What’s next?</a></li>
</ul>
</div>

<div id="where-are-we-so-far" class="section level1">
<h1>Where are we so far?</h1>
<ol style="list-style-type: decimal">
<li>Introduction: <code>vignette(&quot;gc01_gcplyr&quot;)</code></li>
<li>Importing and reshaping data:
<code>vignette(&quot;gc02_import_reshape&quot;)</code></li>
<li>Incorporating experimental designs:
<code>vignette(&quot;gc03_incorporate_designs&quot;)</code></li>
<li>Pre-processing and plotting your data:
<code>vignette(&quot;gc04_preprocess_plot&quot;)</code></li>
<li><strong>Processing your data:</strong>
<code>vignette(&quot;gc05_process&quot;)</code></li>
<li>Analyzing your data: <code>vignette(&quot;gc06_analyze&quot;)</code></li>
<li>Dealing with noise: <code>vignette(&quot;gc07_noise&quot;)</code></li>
<li>Statistics, merging other data, and other resources:
<code>vignette(&quot;gc08_conclusion&quot;)</code></li>
<li>Working with multiple plates:
<code>vignette(&quot;gc09_multiple_plates&quot;)</code></li>
</ol>
<p>So far, we’ve imported and transformed our measures, combined them
with our design information, and pre-processed and plotted our data. Now
we’re going to do some processing of our raw data: calculating
derivatives.</p>
<p>If you haven’t already, load the necessary packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(gcplyr)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># This code was previously explained</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># Here we&#39;re re-running it so it&#39;s available for us to work with</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>example_tidydata <span class="ot">&lt;-</span> <span class="fu">trans_wide_to_tidy</span>(example_widedata_noiseless,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>                                       <span class="at">id_cols =</span> <span class="st">&quot;Time&quot;</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">merge_dfs</span>(example_tidydata, example_design_tidy)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;Well&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>ex_dat_mrg<span class="sc">$</span>Well <span class="ot">&lt;-</span> </span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="fu">factor</span>(ex_dat_mrg<span class="sc">$</span>Well,</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>         <span class="at">levels =</span> <span class="fu">paste</span>(<span class="fu">rep</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>], <span class="at">each =</span> <span class="dv">12</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#Convert time to hours</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>ex_dat_mrg<span class="sc">$</span>Time <span class="ot">&lt;-</span> ex_dat_mrg<span class="sc">$</span>Time<span class="sc">/</span><span class="dv">3600</span></span></code></pre></div>
</div>
<div id="how-to-process-and-analyze-your-data" class="section level1">
<h1>How to process and analyze your data</h1>
<p>With your data and design information pre-processed, <strong>your
dataset is now organized in a way that’s easy to export and
analyze</strong>.</p>
<p>Broadly speaking, there are two main approaches to analyzing growth
curves data:</p>
<ol style="list-style-type: decimal">
<li>directly quantify attributes of the growth dynamics (what
<strong>gcplyr</strong> does)</li>
<li>fit the growth dynamics with a mathematical model, then extract
parameters from the fitted model (what <strong>other packages</strong>
do, see vignette(“08_conclusion”))</li>
</ol>
<p>At this point, since the data is now well-organized, advanced users
may also decide they want to write their own custom analyses (in lieu
of, or alongside, <code>gcplyr</code>-based and/or fitting-based
analyses).</p>
<p>So, how do we directly quantify attributes of growth curves?
Generally, we find features of the density data and its derivatives.
Different projects may desire different analyses, so this article and
the <a href="vignette(%2206_analyze%22)">Analyzing Data</a> and <a href="vignette(%2207_noise%22)">Dealing with Noise</a> articles are
written to highlight common analyses, rather than prescribing what
everyone should do.</p>
<p>Below I list common metrics that require derivatives to be
calculated. If you intend to calculate any of those metrics, or just
want to calculate or plot the derivatives, continue reading. Otherwise,
feel free to skip right to the <a href="vignette(%2206_analyze%22)">Analyzing Data</a> article.</p>
<p><strong>Metrics requiring derivatives:</strong></p>
<ul>
<li>the lag time</li>
<li>the time to reach some growth rate</li>
<li>the maximum per-capita growth rate (i.e. minimum doubling time)</li>
<li>the inflection point</li>
<li>the density and time when a diauxic shift occurs</li>
<li>the maximum per-capita growth rate during diauxie</li>
</ul>
<p>Before we dig into calculating derivatives, we first need to
familiarize ourselves with the <code>dplyr</code> package and its
functions <code>group_by</code> and <code>mutate</code>. Why? Because
the upcoming <code>gcplyr</code> processing functions are <em>best</em>
used <strong>within</strong> <code>dplyr::mutate</code>. <strong>If
you’re already familiar with <code>dplyr</code>, feel free to skip
straight to <a href="#CalculatingDerivatives">Calculating
Derivatives</a>.</strong> If you’re not familiar yet, the primer will
teach you all you need to know to use <code>gcplyr</code>.</p>
<div id="a-brief-primer-on-dplyr" class="section level2">
<h2>A brief primer on dplyr</h2>
<p>The <code>R</code> package <code>dplyr</code> provides a “grammar of
data manipulation” that is useful for a broad array of data analysis
tasks (in fact, <code>dplyr</code> is the direct inspiration for the
name of <code>gcplyr</code>!) For our purposes, we’re going to focus on
two functions: <code>group_by</code> and <code>mutate</code>.</p>
<p>The <code>mutate</code> function in <code>dplyr</code> allows users
to easily create new columns in their <code>data.frame</code>’s. For us,
we’re going to use <code>mutate</code> to create columns with the
derivatives we calculate. However, we want to make sure that
derivative-calculating is done on <em>each</em> unique well
independently. In order to do that, we’re first going to use the
<code>group_by</code> function, which allows users to group the rows of
their <code>data.frame</code>’s into groups that <code>mutate</code>
will then treat independently.</p>
<p>For growth curves, this means we will:</p>
<ol style="list-style-type: decimal">
<li><code>group_by</code> our data so that every unique well is a
group</li>
<li><code>mutate</code> to create new columns with our calculated
derivatives</li>
</ol>
<p>For <code>group_by</code>, we need to specify the
<code>data.frame</code> to be grouped, and then we want to list all the
columns needed to identify each unique well in our dataset. Typically,
this includes all of our design columns along with the plate name and
well name. Make sure you’re <em>not</em> grouping by Time, Absorbance,
or anything else that varies <em>within</em> a well, since if you do
<code>dplyr</code> will group timepoints within a well separately.</p>
<p>To use <code>mutate</code>, we simply have to specify:</p>
<ol style="list-style-type: decimal">
<li>the name of the variable we want results saved to</li>
<li>the function that calculates the new column</li>
</ol>
<p>If you want additional columns, you simply add them to the
<code>mutate</code>.</p>
<p>As you’ll see throughout the rest of this article, we’ll be using
<code>group_by</code> and <code>mutate</code> to calculate derivatives.
If you want to learn more, <code>dplyr</code> has extensive
documentation and examples of its own online, but this primer and the
coming examples should be sufficient to calculate derivatives with
<code>gcplyr</code>.</p>
</div>
</div>
<div id="CalculatingDerivatives" class="section level1">
<h1>Processing data: calculating derivatives</h1>
<p>There are two derivatives we are primarily interested in
calculating:</p>
<ul>
<li>the plain derivative - the slope of the original density data</li>
<li>the per-capita derivative - the growth rate of the cells</li>
</ul>
<p><code>gcplyr</code> includes a <code>calc_deriv</code> to calculate
both of these.</p>
<div id="a-simple-derivative" class="section level2">
<h2>A simple derivative</h2>
<p>To calculate a simple derivative (the slope of our original data)
using <code>calc_deriv</code>, we simply have to provide the x and y
values. Note that this is <strong>not</strong> the growth rate of the
cells, but rather is a measure of how quickly the whole population was
growing at each time point.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="fu">group_by</span>(ex_dat_mrg, Well, Bacteria_strain, Phage),</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>                     <span class="at">deriv =</span> <span class="fu">calc_deriv</span>(<span class="at">x =</span> Time, <span class="at">y =</span> Measurements))</span></code></pre></div>
<p>To visualize these results, let’s look at a few wells that are
representative of the overall diversity of dynamics in our example data.
(In your own code, you should visualize all your data).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>sample_wells <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;F1&quot;</span>, <span class="st">&quot;F10&quot;</span>, <span class="st">&quot;E11&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co"># Now let&#39;s plot the derivative</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(ex_dat_mrg, Well <span class="sc">%in%</span> sample_wells),</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> deriv)) <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Well, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 row containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>You might notice that these lines aren’t super smooth. Why? The plate
reader data has a limited resolution, only to the nearest 0.001, causing
the derivative to “jump” when the reading increases.</p>
</div>
<div id="per-capita-derivative" class="section level2">
<h2>Per-capita derivative</h2>
<p>To calculate the per-capita derivative, we simply modify our use of
<code>calc_deriv</code> with the argument <code>percapita = TRUE</code>.
Note that in this case, you are required to specify a blank value,
i.e. the value of your <code>Measurements</code> that corresponds to a
population density of 0. If your data have already been normalized,
simply add <code>blank = 0</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="fu">group_by</span>(ex_dat_mrg, Well, Bacteria_strain, Phage),</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                     <span class="at">deriv_percap =</span> <span class="fu">calc_deriv</span>(<span class="at">x =</span> Time, <span class="at">y =</span> Measurements,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>                                        <span class="at">percapita =</span> <span class="cn">TRUE</span>, <span class="at">blank =</span> <span class="dv">0</span>))</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co"># Now let&#39;s plot the per-capita derivative</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(ex_dat_mrg, Well <span class="sc">%in%</span> sample_wells),</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> deriv_percap)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Well, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 row containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>These derivatives are very jumpy. Why? The same limited resolution of
the plate reader has an amplified effect on the per-capita derivative
when densities are very close to 0. Luckily, <code>calc_deriv</code> can
calculate derives by fitting a linear regression to multiple points,
reducing this jumpiness in the derivative.</p>
<p>To use this fitting functionality of <code>calc_deriv</code>, specify
either the <code>window_width</code> or <code>window_width_n</code>
parameter. <code>window_width</code> specifies how wide the window used
to include points for the fitting is in units of <code>x</code>, while
<code>window_width_n</code> specifies it in number of data points. I
recommend trying a <code>window_width_n</code> of three or five data
points, since that works for most cases.</p>
<p>For best practice, I recommend doing this fitting on log-transformed
<code>y</code> values, since exponentially growing density values are
linear when log-transformed. You can achieve this simply by setting
<code>trans_y = &#39;log&#39;</code>. With log-transformation, note that
<code>calc_deriv</code> will return <code>NA</code> for any data points
where the reading is equal to or below your <code>blank</code>
value.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="fu">group_by</span>(ex_dat_mrg, Well, Bacteria_strain, Phage),</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                     <span class="at">deriv_percap5 =</span> <span class="fu">calc_deriv</span>(<span class="at">x =</span> Time, <span class="at">y =</span> Measurements, </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                                        <span class="at">percapita =</span> <span class="cn">TRUE</span>, <span class="at">blank =</span> <span class="dv">0</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                                        <span class="at">window_width_n =</span> <span class="dv">5</span>, <span class="at">trans_y =</span> <span class="st">&quot;log&quot;</span>))</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># Now let&#39;s plot the derivative</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(ex_dat_mrg, Well <span class="sc">%in%</span> sample_wells),</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> deriv_percap5)) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Well, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 4 rows containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Great! The jumpiness has been reduced immensely.</p>
</div>
<div id="converting-per-capita-growth-rates-into-doubling-times" class="section level2">
<h2>Converting per-capita growth rates into doubling times</h2>
<p>If you’d rather express your per-capita growth rates as a doubling
time, simply use the <code>doubling_time</code> function to convert your
per-capita growth rates into equivalent doubling times.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="fu">group_by</span>(ex_dat_mrg, Well, Bacteria_strain, Phage),</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>                     <span class="at">deriv_percap5 =</span> <span class="fu">calc_deriv</span>(<span class="at">x =</span> Time, <span class="at">y =</span> Measurements, </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                                        <span class="at">percapita =</span> <span class="cn">TRUE</span>, <span class="at">blank =</span> <span class="dv">0</span>,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                                        <span class="at">window_width_n =</span> <span class="dv">5</span>, <span class="at">trans_y =</span> <span class="st">&quot;log&quot;</span>),</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                     <span class="at">doub_time =</span> <span class="fu">doubling_time</span>(<span class="at">y =</span> deriv_percap5))</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">head</span>(ex_dat_mrg)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 9</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; # Groups:   Well, Bacteria_strain, Phage [4]</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt;    Time Well  Measurements Bacteria_strain Phage   deriv deriv…¹ deriv…² doub_…³</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt;        &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt; 1  0    A1           0.002 Strain 1        No Pha…     0       0      NA      NA</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; 2  0    F1           0.002 Strain 31       No Pha…     0       0      NA      NA</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt; 3  0    F10          0.002 Strain 34       Phage …     0       0      NA      NA</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt; 4  0    E11          0.002 Strain 29       Phage …     0       0      NA      NA</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="co">#&gt; 5  0.25 A1           0.002 Strain 1        No Pha…     0       0      NA      NA</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt; 6  0.25 F1           0.002 Strain 31       No Pha…     0       0      NA      NA</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co">#&gt; # … with abbreviated variable names ¹​deriv_percap, ²​deriv_percap5, ³​doub_time</span></span></code></pre></div>
</div>
</div>
<div id="whats-next" class="section level1">
<h1>What’s next?</h1>
<p>Now that you’ve processed your data, you’re ready to analyze it!</p>
<ol style="list-style-type: decimal">
<li>Introduction: <code>vignette(&quot;gc01_gcplyr&quot;)</code></li>
<li>Importing and reshaping data:
<code>vignette(&quot;gc02_import_reshape&quot;)</code></li>
<li>Incorporating experimental designs:
<code>vignette(&quot;gc03_incorporate_designs&quot;)</code></li>
<li>Pre-processing and plotting your data:
<code>vignette(&quot;gc04_preprocess_plot&quot;)</code></li>
<li>Processing your data: <code>vignette(&quot;gc05_process&quot;)</code></li>
<li><strong>Analyzing your data:
<code>vignette(&quot;gc06_analyze&quot;)</code></strong></li>
<li>Dealing with noise: <code>vignette(&quot;gc07_noise&quot;)</code></li>
<li>Statistics, merging other data, and other resources:
<code>vignette(&quot;gc08_conclusion&quot;)</code></li>
<li>Working with multiple plates:
<code>vignette(&quot;gc09_multiple_plates&quot;)</code></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
