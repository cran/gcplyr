<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Mike Blazanin" />


<title>Incorporating design information</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Incorporating design information</h1>
<h4 class="author">Mike Blazanin</h4>


<div id="TOC">
<ul>
<li><a href="#where-are-we-so-far" id="toc-where-are-we-so-far">Where
are we so far?</a></li>
<li><a href="#including-design-elements" id="toc-including-design-elements">Including design elements</a></li>
<li><a href="#reading-design-elements-from-files" id="toc-reading-design-elements-from-files">Reading design elements from
files</a>
<ul>
<li><a href="#importing-block-shaped-design-files" id="toc-importing-block-shaped-design-files">Importing block-shaped
design files</a>
<ul>
<li><a href="#a-basic-example" id="toc-a-basic-example">A basic
example</a></li>
<li><a href="#importing-multiple-block-shaped-design-elements" id="toc-importing-multiple-block-shaped-design-elements">Importing
multiple block-shaped design elements</a></li>
<li><a href="#notes-for-more-advanced-use" id="toc-notes-for-more-advanced-use">Notes for more advanced
use</a></li>
</ul></li>
<li><a href="#importing-tidy-shaped-design-files" id="toc-importing-tidy-shaped-design-files">Importing tidy-shaped design
files</a></li>
</ul></li>
<li><a href="#generating-designs-in-r" id="toc-generating-designs-in-r">Generating designs in R</a>
<ul>
<li><a href="#an-example-with-a-single-design" id="toc-an-example-with-a-single-design">An example with a single
design</a></li>
<li><a href="#a-few-notes-on-the-pattern" id="toc-a-few-notes-on-the-pattern">A few notes on the pattern</a></li>
<li><a href="#continuing-with-the-example-multiple-designs" id="toc-continuing-with-the-example-multiple-designs">Continuing with
the example: multiple designs</a></li>
<li><a href="#saving-designs-to-files" id="toc-saving-designs-to-files">Saving designs to files</a>
<ul>
<li><a href="#saving-tidy-shaped-designs" id="toc-saving-tidy-shaped-designs">Saving tidy-shaped designs</a></li>
<li><a href="#saving-block-shaped-designs" id="toc-saving-block-shaped-designs">Saving block-shaped designs</a>
<ul>
<li><a href="#saving-block-shaped-designs-to-multiple-files" id="toc-saving-block-shaped-designs-to-multiple-files">Saving
block-shaped designs to multiple files</a></li>
<li><a href="#saving-block-shaped-designs-to-a-single-file" id="toc-saving-block-shaped-designs-to-a-single-file">Saving
block-shaped designs to a single file</a></li>
</ul></li>
<li><a href="#best-practices-for-saving-designs-to-files" id="toc-best-practices-for-saving-designs-to-files">Best practices for
saving designs to files</a></li>
</ul></li>
</ul></li>
<li><a href="#merging-spectrophotometric-and-design-data" id="toc-merging-spectrophotometric-and-design-data">Merging
spectrophotometric and design data</a></li>
<li><a href="#whats-next" id="toc-whats-next">What’s next?</a></li>
</ul>
</div>

<div id="where-are-we-so-far" class="section level1">
<h1>Where are we so far?</h1>
<ol style="list-style-type: decimal">
<li>Introduction: <code>vignette(&quot;gcplyr&quot;)</code></li>
<li>Importing and transforming data:
<code>vignette(&quot;import_transform&quot;)</code></li>
<li><strong>Incorporating design information:</strong>
<code>vignette(&quot;incorporate_designs&quot;)</code></li>
<li>Pre-processing and plotting your data:
<code>vignette(&quot;preprocess_plot&quot;)</code></li>
<li>Processing your data: <code>vignette(&quot;process&quot;)</code></li>
<li>Analyzing your data: <code>vignette(&quot;analyze&quot;)</code></li>
<li>Dealing with noise: <code>vignette(&quot;noise&quot;)</code></li>
<li>Statistics, merging other data, and other resources:
<code>vignette(&quot;conclusion&quot;)</code></li>
</ol>
<p>So far, we’ve imported and transformed our measures data into
<code>R</code>. Now we’re going to address how to incorporate some
design information on what went into each well (and plate).</p>
<p>If you haven’t already, load the necessary packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gcplyr)</span></code></pre></div>
</div>
<div id="including-design-elements" class="section level1">
<h1>Including design elements</h1>
<p>During analysis of growth curve data, we often want to incorporate
information about the experimental design. For example, which bacteria
are present in which wells, or which wells have received certain
treatments. <code>gcplyr</code> enables incorporation of design elements
in two ways:</p>
<ol style="list-style-type: decimal">
<li>Design elements can be imported from files</li>
<li>Design elements can be generated programmatically using
<code>make_design</code></li>
</ol>
</div>
<div id="reading-design-elements-from-files" class="section level1">
<h1>Reading design elements from files</h1>
<p>Users have two options for how to read design elements from files,
depending on the shape of the design files that they have created:</p>
<ul>
<li>If design files are block-shaped, they can be read with
<code>import_blockdesigns</code></li>
<li>If design files are tidy-shaped, they can simply be read with
<code>read_tidys</code></li>
</ul>
<div id="importing-block-shaped-design-files" class="section level2">
<h2>Importing block-shaped design files</h2>
<p>To import block-shaped design files, you can use the
<code>import_blockdesigns</code> function, which will return a
tidy-shaped designs data frame (or list of data frames).</p>
<p><code>import_blockdesigns</code> only requires a list of filenames
(or relative file paths) and will return a data.frame (or list of data
frames) in a <strong>tidy format</strong> that you can save in R. That’s
right, it reads in block-shaped designs but returns a tidy-shaped data
frame!</p>
<div id="a-basic-example" class="section level3">
<h3>A basic example</h3>
<p>Let’s take a look at an example. First, we need to create an example
file for the sake of this tutorial. <strong>Don’t worry how the below
code works</strong>, just imagine that you’ve created this file in
Excel.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;mydesign.csv&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Tr1&quot;</span>, <span class="st">&quot;Tr2&quot;</span>), <span class="at">each =</span> <span class="dv">48</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">nrow =</span> <span class="dv">8</span>, <span class="at">ncol =</span> <span class="dv">12</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>], <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)))</span></code></pre></div>
<p>Now let’s take a look at what the file looks like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_df</span>(<span class="fu">read.csv</span>(<span class="st">&quot;mydesign.csv&quot;</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H Tr1 Tr1 Tr1 Tr1 Tr1 Tr1 Tr2 Tr2 Tr2 Tr2 Tr2 Tr2</span></span></code></pre></div>
<p>Here we can see that our design has Treatment 1 on the left-hand side
of the plate (wells in columns 1 through 6), and Treatment 2 on the
right-hand side of the plate (wells in columns 7 through 12). Let’s
import this design using <code>import_blockdesigns</code>. Since this
block contains the treatment numbers, we’ve given the
<code>block_names</code> as “Treatment_numbers”. If no
<code>block_names</code> is provided, <code>import_blockdesigns</code>
will automatically name it according to the file name.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>my_design <span class="ot">&lt;-</span> <span class="fu">import_blockdesigns</span>(<span class="at">files =</span> <span class="st">&quot;mydesign.csv&quot;</span>, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">block_names =</span> <span class="st">&quot;Treatment_numbers&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(my_design, <span class="dv">20</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Well Treatment_numbers</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    A1               Tr1</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    A2               Tr1</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    A3               Tr1</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    A4               Tr1</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    A5               Tr1</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    A6               Tr1</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    A7               Tr2</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    A8               Tr2</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    A9               Tr2</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  A10               Tr2</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  A11               Tr2</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  A12               Tr2</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   B1               Tr1</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   B2               Tr1</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   B3               Tr1</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   B4               Tr1</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   B5               Tr1</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   B6               Tr1</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   B7               Tr2</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   B8               Tr2</span></span></code></pre></div>
</div>
<div id="importing-multiple-block-shaped-design-elements" class="section level3">
<h3>Importing multiple block-shaped design elements</h3>
<p>What do you do if you have multiple design components? For instance,
what if you have several different bacterial strains each with several
different treatments? In that case, simply save each design component as
a separate file, and import them all in one go with
<code>import_blockdesigns</code>.</p>
<p>First, let’s create another example designs file. Again,
<strong>don’t worry how the below code works</strong>, just imagine that
you’ve created this file in Excel.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;mydesign2.csv&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;StrA&quot;</span>, <span class="st">&quot;StrB&quot;</span>, <span class="st">&quot;StrC&quot;</span>, <span class="st">&quot;StrD&quot;</span>), <span class="at">each =</span> <span class="dv">24</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">nrow =</span> <span class="dv">8</span>, <span class="at">ncol =</span> <span class="dv">12</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>], <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">byrow =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>Now let’s take a look at what the file looks like:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_df</span>(<span class="fu">read.csv</span>(<span class="st">&quot;mydesign2.csv&quot;</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1    2    3    4    5    6    7    8    9   10   11   12</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA StrA</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB StrB</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC StrC</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD StrD</span></span></code></pre></div>
<p>Here we can see that our design has Strain A in the first two rows,
Strain B in the next two rows, and so on.</p>
<p>Let’s now import both designs using <code>import_blockdesigns</code>.
Since our two blocks contain the treatment numbers and then the strain
letters, we’ve given the <code>block_names</code> as
<code>c(&quot;Treatment_numbers&quot;, &quot;Strain_letters&quot;)</code>. If no
<code>block_names</code> is provided, <code>import_blockdesigns</code>
will automatically name it according to the file name.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>my_design <span class="ot">&lt;-</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import_blockdesigns</span>(<span class="at">files =</span> <span class="fu">c</span>(<span class="st">&quot;mydesign.csv&quot;</span>, <span class="st">&quot;mydesign2.csv&quot;</span>), </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">block_names =</span> <span class="fu">c</span>(<span class="st">&quot;Treatment_numbers&quot;</span>, <span class="st">&quot;Strain_letters&quot;</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(my_design, <span class="dv">20</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Well Treatment_numbers Strain_letters</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    A1               Tr1           StrA</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    A2               Tr1           StrA</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    A3               Tr1           StrA</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    A4               Tr1           StrA</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    A5               Tr1           StrA</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    A6               Tr1           StrA</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    A7               Tr2           StrA</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    A8               Tr2           StrA</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    A9               Tr2           StrA</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  A10               Tr2           StrA</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  A11               Tr2           StrA</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  A12               Tr2           StrA</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   B1               Tr1           StrA</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   B2               Tr1           StrA</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   B3               Tr1           StrA</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   B4               Tr1           StrA</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   B5               Tr1           StrA</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   B6               Tr1           StrA</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   B7               Tr2           StrA</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   B8               Tr2           StrA</span></span></code></pre></div>
</div>
<div id="notes-for-more-advanced-use" class="section level3">
<h3>Notes for more advanced use</h3>
<p>Note that <code>import_blockdesigns</code> is essentially a wrapper
function that calls <code>read_blocks</code>, <code>paste_blocks</code>,
<code>trans_block_to_wide</code>, <code>trans_wide_to_tidy</code>, and
then <code>separate_tidys</code>. Any arguments for those functions can
be passed to <code>import_blockdesigns</code>.</p>
<p>For instance, if your design files do not start on the first row and
first column, you can specify a <code>startrow</code> or
<code>startcol</code> just like when you were using
<code>read_blocks</code>. Or if your designs are located in a sheet
other than the first sheet, you can specify <code>sheet</code>.</p>
<p>Additionally, if you’ve already pasted together your design elements
yourself, then you should specify what string is being used as a
separator via the <code>sep</code> argument (that gets passed to
<code>separate_tidys</code>).</p>
<p>If you find yourself needing even more control over the process of
importing block-shaped design files, each of the functions is available
for users to call themselves. So you can run the steps manually, first
reading with <code>read_blocks</code>, pasting as needed with
<code>paste_blocks</code>, transforming to tidy with
<code>trans_block_to_wide</code> and <code>trans_wide_to_tidy</code>,
and finally separating design elements with
<code>separate_tidys</code>.</p>
</div>
</div>
<div id="importing-tidy-shaped-design-files" class="section level2">
<h2>Importing tidy-shaped design files</h2>
<p>Just like measures data, to import tidy-shaped designs you could use
the built-in<code>R</code>functions like <code>read.table</code>.
However, if you need a few more options, you can use the
<code>gcplyr</code> function <code>read_tidys</code>. Unlike the
built-in option, <code>read_tidys</code> can import multiple tidy-shaped
files at once, can add the filename as a column in the resulting
data.frame, and can handle files where the tidy-shaped information
doesn’t start on the first row and column.</p>
<p><code>read_tidys</code> only requires a filename (or vector of
filenames, or relative file paths) and will return a
<code>data.frame</code> (or list of data.frames) that you can save in
R.</p>
<p>Once these design elements have been read into the <code>R</code>
environment, you won’t need to transform them. So you can skip down to
learning how to merge them with your data in the <strong><a href="#merging-spectrophotometric-and-design-data">Merging
spectrophotometric and design data</a></strong> section.</p>
</div>
</div>
<div id="generating-designs-in-r" class="section level1">
<h1>Generating designs in R</h1>
<p>If you’d rather make your design data.frames in R,
<code>gcplyr</code> has a helper function that makes it easy to do so:
<code>make_design</code>. <code>make_design</code> can create:</p>
<ul>
<li>block-shaped data.frames with your design information (e.g. for
outputting to files)</li>
<li>tidy-shaped data.frames with your design information (e.g. for
merging with tidy-shaped plate reader data)</li>
</ul>
<div id="an-example-with-a-single-design" class="section level2">
<h2>An example with a single design</h2>
<p>Let’s start with a simple example demonstrating the basic use of
<code>make_design</code> (we’ll move on to more complicated designs
afterwards).</p>
<p>For example, let’s imagine a growth curve experiment where a 96 well
plate (12 columns and 8 rows) has a different bacterial strain in each
row, but the first and last columns and first and last rows were left
empty.</p>
<table style="width:100%;">
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="5%" />
<col width="16%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
<th>…</th>
<th>Column 11</th>
<th>Column 12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Blank</td>
<td>Strain #1</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #1</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row B</td>
<td>Blank</td>
<td>Strain #2</td>
<td>Strain #2</td>
<td>…</td>
<td>Strain #2</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="odd">
<td>Row G</td>
<td>Blank</td>
<td>Strain #5</td>
<td>Strain #5</td>
<td>…</td>
<td>Strain #5</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Blank</td>
<td>Strain #6</td>
<td>Strain #6</td>
<td>…</td>
<td>Strain #6</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
</tbody>
</table>
<p>Typing a design like this manually into a spreadsheet can be tedious.
But generating a design <code>data.frame</code> using
<code>make_design</code> is easier.</p>
<p><code>make_design</code> first needs some general information, like
the <code>nrows</code> and <code>ncols</code> in the plate, and the
<code>output_format</code> you’d like (typically <code>blocks</code> or
<code>tidy</code>).</p>
<p>Then, for each different design component, <code>make_design</code>
needs five different pieces of information:</p>
<ul>
<li>a vector containing the possible values</li>
<li>a vector specifying which rows these values should be applied
to</li>
<li>a vector specifying which columns these values should be applied
to</li>
<li>a string or vector of the pattern of these values</li>
<li>a Boolean for whether this pattern should be filled byrow (defaults
to TRUE)</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;123456&quot;</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">FALSE</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>So for our example above, we can see:</p>
<ul>
<li>the possible values are
<code>c(&quot;Strain 1&quot;, &quot;Strain 2&quot;, &quot;Strain 3&quot;, &quot;Strain 4&quot;, &quot;Strain 5&quot;, &quot;Strain 6&quot;)</code></li>
<li>the rows these values should be applied to are rows
<code>2:7</code></li>
<li>the columns these values should be applied to are columns
<code>2:11</code></li>
<li>the pattern these values should be filled in by is
<code>&quot;123456&quot;</code></li>
<li>and these values should <em>not</em> be filled by row, they should
be filled by column</li>
</ul>
<p>This entire list is passed with a name (here, “Bacteria”), that will
be used as the resulting column header.</p>
<p>What does the result look like?</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>my_design_blk</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$data</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; NA</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; NA</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; NA</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; NA</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$metadata</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;Bacteria&quot;</span></span></code></pre></div>
<p>We can see that <code>make_design</code> has created a block-shaped
<code>data.frame</code> containing the design elements as requested, and
has attached a <code>metadata</code> containing the
<code>block_name</code> (this is useful for later transformation to
tidy-shaped, or if you’re generating multiple design elements).</p>
</div>
<div id="a-few-notes-on-the-pattern" class="section level2">
<h2>A few notes on the pattern</h2>
<p>One of the most important elements of every argument passed to
<code>make_design</code> is the string or vector specifying the pattern
of values.</p>
<p>Oftentimes, it will be most convenient to simply use
single-characters to correspond to the values. This is the default
behavior of <code>make_design</code>, which splits the pattern string
into individual characters, and then uses those characters to correspond
to the indices of the values you provided.</p>
<p>For instance, in the example above, I used the numbers 1 through 6 to
correspond to the values
<code>&quot;Strain 1&quot;, &quot;Strain 2&quot;, &quot;Strain 3&quot;, &quot;Strain 4&quot;, &quot;Strain 5&quot;, &quot;Strain 6&quot;</code>.</p>
<p>It’s important to <strong>note that the “0” character is reserved for
<code>NA</code> values.</strong> There is an example of this later.</p>
<p>If you have more than 9 values, you can use letters (uppercase and/or
lowercase). In that case, you just have to specify a
<code>lookup_tbl_start</code> so that the function knows what letter
you’re using as the <code>1</code> index. If no
<code>lookup_tbl_start</code> is specified, the default is to count
numbers first, then uppercase letters, then lowercase letters. For
instance, in the previous example, I could have equivalently done:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;A&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;ABCDEF&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">FALSE</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Or I could have done:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;abcdef&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">FALSE</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Alternatively, you can use a separating character like a comma to
delineate your indices. If you are doing so in order to use
multicharacter indices (like numbers with more than one digit), all your
indices will have to be numeric.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">pattern_split =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1,2,3,4,5,6&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">FALSE</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>If you find it easier to input the pattern as a vector rather than as
a string that needs to be split, you can do that too. Just like when
passing a string, if you’re not using numbers, then uppercase letters,
then lowercase letters for your indices, make sure to specify a
different <code>lookup_tbl_start</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">FALSE</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="continuing-with-the-example-multiple-designs" class="section level2">
<h2>Continuing with the example: multiple designs</h2>
<p>Now let’s return to our example growth curve experiment. Imagine that
now, <em>in addition</em> to having a different bacterial strain in each
row, we also have a different media in each column in the plate.</p>
<table style="width:100%;">
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
<col width="5%" />
<col width="16%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
<th>…</th>
<th>Column 11</th>
<th>Column 12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Blank</td>
<td>Media #1</td>
<td>Media #2</td>
<td>…</td>
<td>Media #10</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Blank</td>
<td>Media #1</td>
<td>Media #2</td>
<td>…</td>
<td>Media #10</td>
<td>Blank</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Blank</td>
<td>Blank</td>
<td>Blank</td>
<td>…</td>
<td>Blank</td>
<td>Blank</td>
</tr>
</tbody>
</table>
<p>We can generate both the bacterial strain design and the media design
simply by adding an additional argument to our make_design call.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;abcdef&quot;</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">FALSE</span>),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Media =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Med1&quot;</span>, <span class="st">&quot;Med2&quot;</span>, <span class="st">&quot;Med3&quot;</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med4&quot;</span>, <span class="st">&quot;Med5&quot;</span>, <span class="st">&quot;Med6&quot;</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med7&quot;</span>, <span class="st">&quot;Med8&quot;</span>, <span class="st">&quot;Med9&quot;</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med10&quot;</span>, <span class="st">&quot;Med11&quot;</span>, <span class="st">&quot;Med12&quot;</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;abcdefghij&quot;</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>my_design_blk</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$data</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; NA</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; &quot;Str4&quot; NA</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; NA</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; NA</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$metadata</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;Bacteria&quot; </span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$data</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11      12</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA      NA</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; &quot;Med6&quot; &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA      NA</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$metadata</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &quot;Media&quot;</span></span></code></pre></div>
<p>Here we can see that two blocks have been created, one with our
bacterial strains, and one with our media.</p>
<p>Now, imagine after the experiment we discover that Bacterial Strain 4
and Media #6 were contaminated, and we’d like to exclude them from our
analyses by marking them as <code>NA</code> in the design. We can simply
modify our pattern string, placing a 0 anywhere we would like an
<code>NA</code> to be filled in.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;abc0ef&quot;</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">FALSE</span>),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Media =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Med1&quot;</span>, <span class="st">&quot;Med2&quot;</span>, <span class="st">&quot;Med3&quot;</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med4&quot;</span>, <span class="st">&quot;Med5&quot;</span>, <span class="st">&quot;Med6&quot;</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med7&quot;</span>, <span class="st">&quot;Med8&quot;</span>, <span class="st">&quot;Med9&quot;</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Med10&quot;</span>, <span class="st">&quot;Med11&quot;</span>, <span class="st">&quot;Med12&quot;</span>),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;abcde0ghij&quot;</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>my_design_blk</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$data</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; NA</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; NA</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; NA</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$metadata</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;Bacteria&quot; </span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$data</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7  8      9      10     11      12</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$metadata</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &quot;Media&quot;</span></span></code></pre></div>
<p>Now we can see that our design has been easily modified to place NA’s
for those wells, which we can use after merging our designs with our
data to exclude all of those wells from analyses.</p>
<p>However, the real strength of <code>make_design</code> is that it is
not limited to simple alternating patterns. The pattern specified can be
any pattern, which <code>make_design</code> will replicate sufficient
times to cover the entire set of listed wells.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;abaaabbbab&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">FALSE</span>),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Media =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;Med1&quot;</span>, <span class="st">&quot;Med2&quot;</span>, <span class="st">&quot;Med3&quot;</span>),</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>               <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;aabbbc000abc&quot;</span>))</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>my_design_blk</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$data</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Str1&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str2&quot; NA</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Str1&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str1&quot; &quot;Str2&quot; NA</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$metadata</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;Bacteria&quot; </span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$data</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Med1&quot; &quot;Med1&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med3&quot; NA     NA     NA     &quot;Med1&quot; NA</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Med2&quot; &quot;Med3&quot; &quot;Med1&quot; &quot;Med1&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med3&quot; NA     NA     NA</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA NA     &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med1&quot; &quot;Med1&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med3&quot; NA</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA NA     NA     NA     &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med1&quot; &quot;Med1&quot; &quot;Med2&quot; &quot;Med2&quot; NA</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Med2&quot; &quot;Med3&quot; NA     NA     NA     &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med1&quot; &quot;Med1&quot; NA</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Med2&quot; &quot;Med2&quot; &quot;Med2&quot; &quot;Med3&quot; NA     NA     NA     &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; NA</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$metadata</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &quot;Media&quot;</span></span></code></pre></div>
<p><code>gcplyr</code> also includes an optional helper function for
<code>make_design</code> called <code>make_designpattern</code>.
<code>make_designpattern</code> just helps by reminding the user what
arguments are necessary for each design and ensuring they’re in the
correct order. For example, the following produces the same
<code>data.frame</code> as the above code:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>my_design_blk <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;blocks&quot;</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, <span class="at">pattern =</span> <span class="st">&quot;abc0ef&quot;</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">FALSE</span>),</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Media =</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Med1&quot;</span>, <span class="st">&quot;Med2&quot;</span>, <span class="st">&quot;Med3&quot;</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med4&quot;</span>, <span class="st">&quot;Med5&quot;</span>, <span class="st">&quot;Med6&quot;</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med7&quot;</span>, <span class="st">&quot;Med8&quot;</span>, <span class="st">&quot;Med9&quot;</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med10&quot;</span>, <span class="st">&quot;Med11&quot;</span>, <span class="st">&quot;Med12&quot;</span>),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, <span class="at">pattern =</span> <span class="st">&quot;abcde0ghij&quot;</span>))</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>my_design_blk</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$data</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7      8      9      10     11     12</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; &quot;Str1&quot; NA</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; &quot;Str2&quot; NA</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; &quot;Str3&quot; NA</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; &quot;Str5&quot; NA</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; &quot;Str6&quot; NA</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]$metadata</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;Bacteria&quot; </span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$data</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1  2      3      4      5      6      7  8      9      10     11      12</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G NA &quot;Med1&quot; &quot;Med2&quot; &quot;Med3&quot; &quot;Med4&quot; &quot;Med5&quot; NA &quot;Med7&quot; &quot;Med8&quot; &quot;Med9&quot; &quot;Med10&quot; NA</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H NA NA     NA     NA     NA     NA     NA NA     NA     NA     NA      NA</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]$metadata</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name </span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &quot;Media&quot;</span></span></code></pre></div>
<p>So far, we’ve been using the <code>blocks</code> option for
<code>output_format</code>, because it’s easy to see that our design
matches what we’d intended with that format. However, <strong>for
merging our designs with plate reader data, we need it
tidy-shaped</strong>. Luckily, there’s no need to transform it yourself,
simply change the <code>output_format</code> argument option to
<code>tidy</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>my_design_tdy <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_format =</span> <span class="st">&quot;tidy&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>, <span class="at">lookup_tbl_start =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Bacteria =</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Str1&quot;</span>, <span class="st">&quot;Str2&quot;</span>, <span class="st">&quot;Str3&quot;</span>, </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Str4&quot;</span>, <span class="st">&quot;Str5&quot;</span>, <span class="st">&quot;Str6&quot;</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, <span class="at">pattern =</span> <span class="st">&quot;abc0ef&quot;</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">FALSE</span>),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Media =</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Med1&quot;</span>, <span class="st">&quot;Med2&quot;</span>, <span class="st">&quot;Med3&quot;</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med4&quot;</span>, <span class="st">&quot;Med5&quot;</span>, <span class="st">&quot;Med6&quot;</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med7&quot;</span>, <span class="st">&quot;Med8&quot;</span>, <span class="st">&quot;Med9&quot;</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Med10&quot;</span>, <span class="st">&quot;Med11&quot;</span>, <span class="st">&quot;Med12&quot;</span>),</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, <span class="at">pattern =</span> <span class="st">&quot;abcde0ghij&quot;</span>))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(my_design_tdy, <span class="dv">20</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Well Bacteria Media</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    A1       NA    NA</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    A2       NA    NA</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    A3       NA    NA</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    A4       NA    NA</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    A5       NA    NA</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    A6       NA    NA</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    A7       NA    NA</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    A8       NA    NA</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    A9       NA    NA</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  A10       NA    NA</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  A11       NA    NA</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  A12       NA    NA</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   B1       NA    NA</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   B2     Str1  Med1</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   B3     Str1  Med2</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   B4     Str1  Med3</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   B5     Str1  Med4</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   B6     Str1  Med5</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   B7     Str1    NA</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   B8     Str1  Med7</span></span></code></pre></div>
</div>
<div id="saving-designs-to-files" class="section level2">
<h2>Saving designs to files</h2>
<p>Often after generating designs in <code>R</code> with
<code>make_design</code>, you’ll want to save those designs to files.
This might be so that human-readable files documenting your designs are
available without opening <code>R</code>. Or perhaps it’s because you
need to post the design files, for instance to Dryad as part of a
manuscript submission.</p>
<p>If you’d like to save your designs to files, you can save them either
tidy-shaped or block-shaped. Both formats can easily be read back into
<code>R</code> by <code>gcplyr</code>.</p>
<div id="saving-tidy-shaped-designs" class="section level3">
<h3>Saving tidy-shaped designs</h3>
<p>These design files will be less human-readable, but easier to import
and merge. Additionally, tidy-shaped files are often better for data
repositories, like Dryad. To save tidy-shaped designs, simply use the
built-in <code>write.csv</code> function.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#See the previous section where we created my_design_tdy</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> my_design_tdy, <span class="at">file =</span> <span class="st">&quot;tidy_design.csv&quot;</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="saving-block-shaped-designs" class="section level3">
<h3>Saving block-shaped designs</h3>
<p>These design files will be more human-readable but require slightly
more computational steps to import and merge. For these, use the
<code>gcplyr</code> function <code>write_blocks</code>. Typically,
you’ll use <code>write_blocks</code> to save files in one of two
formats:</p>
<ul>
<li><code>multiple</code> - each block will be saved to its own
<code>.csv</code> file</li>
<li><code>single</code> - all the blocks will be saved to a single
<code>.csv</code> file, with an empty row in between them</li>
</ul>
<div id="saving-block-shaped-designs-to-multiple-files" class="section level4">
<h4>Saving block-shaped designs to multiple files</h4>
<p>The default setting for <code>write_blocks</code> is
<code>output_format = &#39;multiple&#39;</code>. This creates one
<code>csv</code> file for each block, naming the files according to the
<code>block_names</code> in the metadata for each block. To use the
default naming convention, we set <code>file = NULL</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#See the previous section where we created my_design_blk</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_blocks</span>(my_design_blk, <span class="at">file =</span> <span class="cn">NULL</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Let&#39;s see what the files look like</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print_df</span>(<span class="fu">read.csv</span>(<span class="st">&quot;Bacteria.csv&quot;</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1    2    3    4    5    6    7    8    9   10   11 12</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A                                                       </span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B   Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1   </span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C   Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2   </span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D   Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3   </span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E                                                       </span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F   Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5   </span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G   Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6   </span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print_df</span>(<span class="fu">read.csv</span>(<span class="st">&quot;Media.csv&quot;</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>))</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1    2    3    4    5    6 7    8    9   10    11 12</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A                                                     </span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; B   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; D   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; E   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; G   Med1 Med2 Med3 Med4 Med5   Med7 Med8 Med9 Med10   </span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; H</span></span></code></pre></div>
</div>
<div id="saving-block-shaped-designs-to-a-single-file" class="section level4">
<h4>Saving block-shaped designs to a single file</h4>
<p>The other setting for <code>write_blocks</code> is
<code>output_format = &#39;single&#39;</code>. This creates a single
<code>csv</code> file that contains all the blocks, putting metadata
like <code>block_names</code> in rows that precede each block.</p>
<p>Let’s take a look what the <code>single</code> output format looks
like:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#See the previous section where we created my_design_blk</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_blocks</span>(my_design_blk, <span class="at">file =</span> <span class="st">&quot;Design.csv&quot;</span>, <span class="at">output_format =</span> <span class="st">&quot;single&quot;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Let&#39;s see what the file looks like</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print_df</span>(<span class="fu">read.csv</span>(<span class="st">&quot;Design.csv&quot;</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">colClasses =</span> <span class="st">&quot;character&quot;</span>))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name Bacteria                                                      </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   1    2    3    4    5    6    7    8    9   10    11 12</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          A                                                               </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          B          Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1 Str1  Str1   </span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          C          Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2 Str2  Str2   </span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          D          Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3 Str3  Str3   </span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          E                                                               </span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          F          Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5 Str5  Str5   </span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          G          Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6 Str6  Str6   </span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          H                                                               </span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                          </span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; block_name    Media                                                      </span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   1    2    3    4    5    6    7    8    9   10    11 12</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          A                                                               </span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          B          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          C          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          D          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          E          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          F          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          G          Med1 Med2 Med3 Med4 Med5      Med7 Med8 Med9 Med10   </span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          H</span></span></code></pre></div>
<p>Here we can see all our design information has been saved to a single
file, and the metadata has been added in rows before each block.</p>
</div>
</div>
<div id="best-practices-for-saving-designs-to-files" class="section level3">
<h3>Best practices for saving designs to files</h3>
<p>It’s best to leave the <code>make_design</code> and
<code>write_blocks</code> commands in your analysis script, so that
every time your analysis is run your design files are kept up to date.
Just note that if your <code>make_design</code> command has
<code>output_format = blocks</code>, you’ll need to make a version where
<code>output_format = tidy</code> that you can <code>merge_dfs</code>
with your plate reader data.</p>
</div>
</div>
</div>
<div id="merging-spectrophotometric-and-design-data" class="section level1">
<h1>Merging spectrophotometric and design data</h1>
<p>Once we have both our design and data in the<code>R</code>environment
and tidy-shaped, we can merge them using <code>merge_dfs</code>.</p>
<p>For this, we’ll use the data in the
<code>example_widedata_noiseless</code> dataset that is included with
<code>gcplyr</code>, and which was the source for our previous examples
with <code>import_blockmeasures</code> and <code>read_wides</code>.</p>
<p>In the <code>example_widedata_noiseless</code> dataset, we have 48
different bacterial strains. The left side of the plate has all 48
strains in a single well each, and the right side of the plate also has
all 48 strains in a single well each:</p>
<table>
<colgroup>
<col width="19%" />
<col width="17%" />
<col width="6%" />
<col width="17%" />
<col width="17%" />
<col width="6%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>…</th>
<th>Column 6</th>
<th>Column 7</th>
<th>…</th>
<th>Column 12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #6</td>
<td>Strain #1</td>
<td>…</td>
<td>Strain #6</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>Strain #7</td>
<td>…</td>
<td>Strain #12</td>
<td>Strain #7</td>
<td>…</td>
<td>Strain #12</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>Strain #37</td>
<td>…</td>
<td>Strain #42</td>
<td>Strain #37</td>
<td>…</td>
<td>Strain #42</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>Strain #43</td>
<td>…</td>
<td>Strain #48</td>
<td>Strain #43</td>
<td>…</td>
<td>Strain #48</td>
</tr>
</tbody>
</table>
<p>Then, on the right hand side of the plate a phage was also inoculated
(while the left hand side remained bacteria-only):</p>
<table>
<colgroup>
<col width="19%" />
<col width="17%" />
<col width="6%" />
<col width="17%" />
<col width="17%" />
<col width="6%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>Row names</th>
<th>Column 1</th>
<th>…</th>
<th>Column 6</th>
<th>Column 7</th>
<th>…</th>
<th>Column 12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Row A</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="even">
<td>Row B</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>Row G</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
<tr class="odd">
<td>Row H</td>
<td>No Phage</td>
<td>…</td>
<td>No Phage</td>
<td>Phage Added</td>
<td>…</td>
<td>Phage Added</td>
</tr>
</tbody>
</table>
<p>Let’s generate our design:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>example_design <span class="ot">&lt;-</span> <span class="fu">make_design</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern_split =</span> <span class="st">&quot;,&quot;</span>, <span class="at">nrows =</span> <span class="dv">8</span>, <span class="at">ncols =</span> <span class="dv">12</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Bacteria_strain&quot;</span> <span class="ot">=</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">paste</span>(<span class="st">&quot;Strain&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>),</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Bacteria_strain&quot;</span> <span class="ot">=</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">paste</span>(<span class="st">&quot;Strain&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">cols =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">48</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Phage&quot;</span> <span class="ot">=</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;No Phage&quot;</span>),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">&quot;1&quot;</span>),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Phage&quot;</span> <span class="ot">=</span> <span class="fu">make_designpattern</span>(</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Phage Added&quot;</span>),</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">cols =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">&quot;1&quot;</span>))</span></code></pre></div>
<p>Here’s what the resulting data.frame looks like:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(example_design, <span class="dv">20</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Well Bacteria_strain       Phage</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    A1        Strain 1    No Phage</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    A2        Strain 2    No Phage</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    A3        Strain 3    No Phage</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    A4        Strain 4    No Phage</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    A5        Strain 5    No Phage</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    A6        Strain 6    No Phage</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    A7        Strain 1 Phage Added</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    A8        Strain 2 Phage Added</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    A9        Strain 3 Phage Added</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  A10        Strain 4 Phage Added</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  A11        Strain 5 Phage Added</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  A12        Strain 6 Phage Added</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   B1        Strain 7    No Phage</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   B2        Strain 8    No Phage</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   B3        Strain 9    No Phage</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   B4       Strain 10    No Phage</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   B5       Strain 11    No Phage</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   B6       Strain 12    No Phage</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   B7        Strain 7 Phage Added</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   B8        Strain 8 Phage Added</span></span></code></pre></div>
<p>Now let’s transform the <code>example_widedata_noiseless</code> to
tidy-shaped.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>example_tidydata <span class="ot">&lt;-</span> <span class="fu">trans_wide_to_tidy</span>(example_widedata_noiseless,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">id_cols =</span> <span class="st">&quot;Time&quot;</span>)</span></code></pre></div>
<p>And finally, we merge the two using <code>merge_dfs</code>, saving
the result to <code>ex_dat_mrg</code>, short for
example_data_merged:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>ex_dat_mrg <span class="ot">&lt;-</span> <span class="fu">merge_dfs</span>(example_tidydata, example_design)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;Well&quot;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ex_dat_mrg)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Time Well Measurements Bacteria_strain    Phage</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0   A1        0.002        Strain 1 No Phage</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0   B1        0.002        Strain 7 No Phage</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    0   C1        0.002       Strain 13 No Phage</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    0   D1        0.002       Strain 19 No Phage</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    0   E1        0.002       Strain 25 No Phage</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    0   F1        0.002       Strain 31 No Phage</span></span></code></pre></div>
</div>
<div id="whats-next" class="section level1">
<h1>What’s next?</h1>
<p>Now that you’ve merged your data and designs, you can pre-process and
plot your data</p>
<ol style="list-style-type: decimal">
<li>Introduction: <code>vignette(&quot;gcplyr&quot;)</code></li>
<li>Importing and transforming data:
<code>vignette(&quot;import_transform&quot;)</code></li>
<li>Incorporating design information:
<code>vignette(&quot;incorporate_designs&quot;)</code></li>
<li><strong>Pre-processing and plotting your data:
<code>vignette(&quot;preprocess_plot&quot;)</code></strong></li>
<li>Processing your data: <code>vignette(&quot;process&quot;)</code></li>
<li>Analyzing your data: <code>vignette(&quot;analyze&quot;)</code></li>
<li>Dealing with noise: <code>vignette(&quot;noise&quot;)</code></li>
<li>Statistics, merging other data, and other resources:
<code>vignette(&quot;conclusion&quot;)</code></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
